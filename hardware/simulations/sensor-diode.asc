Version 4
SHEET 1 1476 1540
WIRE 1264 32 1200 32
WIRE 1408 32 1344 32
WIRE -704 64 -752 64
WIRE -576 64 -640 64
WIRE -560 64 -576 64
WIRE -64 64 -112 64
WIRE 80 64 16 64
WIRE -1232 80 -1280 80
WIRE -1104 80 -1152 80
WIRE 1056 80 960 80
WIRE 1200 80 1200 32
WIRE 1200 80 1136 80
WIRE -576 96 -576 64
WIRE -16 112 -32 112
WIRE 1200 128 1200 80
WIRE 1264 128 1200 128
WIRE -1280 144 -1280 80
WIRE -1280 144 -1360 144
WIRE -1152 144 -1200 144
WIRE -32 144 -32 112
WIRE 560 144 560 96
WIRE 1408 144 1408 32
WIRE 1408 144 1328 144
WIRE -240 160 -256 160
WIRE -112 160 -112 64
WIRE -112 160 -160 160
WIRE -64 160 -112 160
WIRE 480 160 480 128
WIRE 528 160 480 160
WIRE 1056 160 960 160
WIRE 1200 160 1136 160
WIRE 1264 160 1200 160
WIRE -1200 176 -1200 144
WIRE 80 176 80 64
WIRE 80 176 0 176
WIRE 704 176 592 176
WIRE -1280 192 -1280 144
WIRE -1232 192 -1280 192
WIRE -64 192 -96 192
WIRE 528 192 432 192
WIRE -1104 208 -1104 80
WIRE -1104 208 -1168 208
WIRE -1232 224 -1280 224
WIRE -576 224 -576 176
WIRE 1200 224 1200 160
WIRE -96 256 -96 192
WIRE -96 256 -160 256
WIRE 1200 336 1200 288
WIRE -992 704 -1040 704
WIRE -288 704 -336 704
WIRE 336 704 288 704
WIRE -1040 752 -1040 704
WIRE -336 752 -336 704
WIRE 288 752 288 704
WIRE -1040 880 -1040 832
WIRE -336 880 -336 832
WIRE 288 880 288 832
WIRE -992 992 -1040 992
WIRE -288 992 -336 992
WIRE 336 992 288 992
WIRE -1040 1040 -1040 992
WIRE -336 1040 -336 992
WIRE 288 1040 288 992
WIRE -1040 1168 -1040 1120
WIRE -336 1168 -336 1120
WIRE 288 1168 288 1120
WIRE 336 1264 288 1264
WIRE -992 1280 -1040 1280
WIRE -288 1280 -336 1280
WIRE 288 1312 288 1264
WIRE -1040 1328 -1040 1280
WIRE -336 1328 -336 1280
WIRE 288 1440 288 1392
WIRE -1040 1456 -1040 1408
WIRE -336 1456 -336 1408
FLAG 560 96 VCC
FLAG 480 128 VBias
FLAG 560 208 0
FLAG -752 64 Vd
FLAG -560 64 Vf
FLAG 432 192 va
FLAG -1200 240 0
FLAG -1152 144 VCC
FLAG -1104 208 Vd
FLAG -16 112 VCC
FLAG 80 176 Va
FLAG -32 208 0
FLAG -256 160 0
FLAG 704 176 VComp
FLAG -160 256 Vf
FLAG -576 224 0
FLAG 960 160 VComp
FLAG 1200 336 0
FLAG 960 80 0
FLAG 1296 176 0
FLAG 1296 112 VCC
FLAG 1408 144 Is_white
FLAG -1280 224 VBias
FLAG -1360 144 Diode
FLAG -1040 1456 0
FLAG 288 1168 0
FLAG -992 1280 Vw
FLAG 336 992 Vbias
FLAG 288 880 0
FLAG 336 704 VCC
FLAG -1040 1168 0
FLAG -992 992 Vb
FLAG -1040 880 0
FLAG -992 704 Vg
FLAG -336 1456 0
FLAG -288 1280 Vw_off
FLAG -336 1168 0
FLAG -288 992 Vb_off
FLAG -336 880 0
FLAG -288 704 Vg_off
FLAG 288 1440 0
FLAG 336 1264 V_offset
SYMBOL OpAmps\\UniversalOpAmp4 560 176 R0
SYMATTR InstName U1
SYMBOL res -592 80 R0
SYMATTR InstName R1
SYMATTR Value 30k
SYMBOL cap -640 48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 47n
SYMBOL OpAmps\\UniversalOpAmp4 -1200 208 R0
SYMATTR InstName U2
SYMBOL OpAmps\\UniversalOpAmp4 -32 176 R0
SYMATTR InstName U3
SYMBOL res 32 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res -144 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 40k
SYMBOL res 1152 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL cap 1184 224 R0
SYMATTR InstName C2
SYMATTR Value 1.6µ
SYMBOL OpAmps\\UniversalOpAmp4 1296 144 R0
SYMATTR InstName U4
SYMBOL res 1360 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL res 1152 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 20k
SYMBOL res -1136 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMBOL voltage 288 1024 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vbias1
SYMATTR Value 0.5
SYMBOL voltage -1040 1312 R0
WINDOW 123 0 0 Left 0
WINDOW 39 -205 89 Left 2
WINDOW 3 26 103 Left 2
SYMATTR Value PWL file="./Photodiode PWL Sources/on-white-2s.txt"
SYMATTR InstName Vwhite1
SYMBOL voltage 288 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsupply1
SYMATTR Value 5V
SYMBOL voltage -1040 1024 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 27 103 Left 2
SYMATTR Value PWL file="./Photodiode PWL Sources/on-black-2s.txt"
SYMATTR InstName Vblack1
SYMBOL voltage -1040 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 27 103 Left 2
SYMATTR Value PWL file="./PWL Sources/on-green-2s.txt"
SYMATTR InstName Vgreen1
SYMBOL voltage -336 1312 R0
WINDOW 123 0 0 Left 0
WINDOW 39 -205 89 Left 2
WINDOW 3 26 103 Left 2
SYMATTR Value PWL file="./Photodiode PWL Sources/off-white-2s.txt"
SYMATTR InstName Vwhite2
SYMBOL voltage -336 1024 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 27 103 Left 2
SYMATTR Value PWL file="./Photodiode PWL Sources/off-black-2s.txt"
SYMATTR InstName Vblack2
SYMBOL voltage -336 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 27 103 Left 2
SYMATTR Value PWL file="./Photodiode PWL Sources/off-green-2s.txt"
SYMATTR InstName Vgreen2
SYMBOL voltage 288 1296 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Voffset1
SYMATTR Value 0.5
TEXT 288 -8 Left 2 ;PWM regenerator
TEXT -912 -40 Left 2 ;High pass filter (Cf = 110Hz)
TEXT -1320 0 Left 2 ;Signal Buffer (Stage 1)
TEXT -304 -40 Left 2 ;Signal amplification
TEXT 528 704 Left 2 !.tran 0 250m 0 0.01
TEXT -1160 1080 Left 2 ;Black
TEXT -1168 1368 Left 2 ;White
TEXT -1168 792 Left 2 ;Green
TEXT -1040 592 Left 2 ;Signal Waveforms
TEXT 160 592 Left 2 ;Supply Voltages
TEXT 528 592 Left 2 ;SPICE Directives
TEXT -456 1080 Left 2 ;Black
TEXT -464 1368 Left 2 ;White
TEXT -464 792 Left 2 ;Green
TEXT -464 592 Left 2 ;Signal Waveforms
RECTANGLE Normal 800 320 288 16 2
RECTANGLE Normal -400 288 -912 -16 2
RECTANGLE Normal 1440 368 880 -16 2
RECTANGLE Normal 176 320 -336 -16 2
RECTANGLE Normal 832 1536 -1184 512 2
