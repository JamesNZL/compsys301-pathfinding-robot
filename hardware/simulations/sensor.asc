Version 4
SHEET 1 1828 1368
WIRE -992 -640 -1136 -640
WIRE -976 -640 -992 -640
WIRE -992 -608 -992 -640
WIRE -2032 -576 -2080 -576
WIRE -1888 -576 -1952 -576
WIRE -3376 -560 -3552 -560
WIRE -2400 -560 -2576 -560
WIRE -1536 -560 -1712 -560
WIRE -3424 -528 -3472 -528
WIRE -3024 -528 -3072 -528
WIRE -2896 -528 -2960 -528
WIRE -2880 -528 -2896 -528
WIRE -2448 -528 -2496 -528
WIRE -1984 -528 -2000 -528
WIRE -1584 -528 -1632 -528
WIRE -1136 -528 -1136 -640
WIRE -1216 -512 -1216 -544
WIRE -1168 -512 -1216 -512
WIRE -3472 -496 -3472 -528
WIRE -2896 -496 -2896 -528
WIRE -2496 -496 -2496 -528
WIRE -2000 -496 -2000 -528
WIRE -1632 -496 -1632 -528
WIRE -992 -496 -992 -528
WIRE -992 -496 -1104 -496
WIRE -3552 -480 -3552 -560
WIRE -3504 -480 -3552 -480
WIRE -2576 -480 -2576 -560
WIRE -2528 -480 -2576 -480
WIRE -2208 -480 -2224 -480
WIRE -2080 -480 -2080 -576
WIRE -2080 -480 -2128 -480
WIRE -2032 -480 -2080 -480
WIRE -1712 -480 -1712 -560
WIRE -1664 -480 -1712 -480
WIRE -1328 -480 -1344 -480
WIRE -1216 -480 -1248 -480
WIRE -1168 -480 -1216 -480
WIRE -3376 -464 -3376 -560
WIRE -3376 -464 -3440 -464
WIRE -2400 -464 -2400 -560
WIRE -2400 -464 -2464 -464
WIRE -1888 -464 -1888 -576
WIRE -1888 -464 -1968 -464
WIRE -1536 -464 -1536 -560
WIRE -1536 -464 -1600 -464
WIRE -3504 -448 -3552 -448
WIRE -2528 -448 -2576 -448
WIRE -2032 -448 -2064 -448
WIRE -1664 -448 -1712 -448
WIRE -2064 -432 -2064 -448
WIRE -1216 -400 -1216 -480
WIRE -1168 -400 -1216 -400
WIRE -992 -400 -992 -496
WIRE -992 -400 -1088 -400
WIRE -2896 -368 -2896 -416
WIRE -3104 128 -3152 128
WIRE -2160 128 -2208 128
WIRE -3152 176 -3152 128
WIRE -2208 176 -2208 128
WIRE -3152 304 -3152 256
WIRE -2208 304 -2208 256
WIRE -3104 416 -3152 416
WIRE -2160 416 -2208 416
WIRE -3152 464 -3152 416
WIRE -2208 464 -2208 416
WIRE -3152 592 -3152 544
WIRE -2208 592 -2208 544
WIRE -3104 704 -3152 704
WIRE -3152 752 -3152 704
WIRE -3152 880 -3152 832
FLAG -976 -640 VCC
FLAG -1216 -544 VBias
FLAG -3152 880 0
FLAG -2208 592 0
FLAG -3104 704 Vw
FLAG -2160 416 Vbias
FLAG -2208 304 0
FLAG -2160 128 VCC
FLAG -1136 -464 0
FLAG -2896 -368 0
FLAG -3072 -528 VBuf1
FLAG -2880 -528 Vf
FLAG -1344 -480 VBuf3
FLAG -3472 -432 0
FLAG -3424 -528 VCC
FLAG -3376 -464 VBuf1
FLAG -3552 -448 Vin
FLAG -2496 -432 0
FLAG -2448 -528 VCC
FLAG -2400 -464 VBuf2
FLAG -2576 -448 Vf
FLAG -1984 -528 VCC
FLAG -2064 -432 VBuf2
FLAG -1888 -464 Va
FLAG -1632 -432 0
FLAG -1584 -528 VCC
FLAG -1536 -464 VBuf3
FLAG -1712 -448 Va
FLAG -2000 -432 0
FLAG -2224 -480 0
FLAG -992 -496 VComp
FLAG -3152 592 0
FLAG -3104 416 Vb
FLAG -3152 304 0
FLAG -3104 128 Vg
SYMBOL res -1232 -496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res -1072 -416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res -1008 -624 R0
SYMATTR InstName R3
SYMATTR Value 3.3k
SYMBOL voltage -2208 448 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vbias
SYMATTR Value 3V
SYMBOL voltage -3152 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 -205 89 Left 2
WINDOW 3 26 103 Left 2
SYMATTR SpiceLine Rser=1000k
SYMATTR InstName Vwhite
SYMATTR Value PWL file="./PWL Sources/on-white-2s.txt"
SYMBOL voltage -2208 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsupply
SYMATTR Value 5V
SYMBOL OpAmps\\UniversalOpAmp4 -1136 -496 R0
SYMATTR InstName U2
SYMBOL res -2912 -512 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL cap -2960 -544 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1.6µ
SYMBOL OpAmps\\UniversalOpAmp4 -3472 -464 R0
SYMATTR InstName U1
SYMBOL OpAmps\\UniversalOpAmp4 -2496 -464 R0
SYMATTR InstName U3
SYMBOL OpAmps\\UniversalOpAmp4 -2000 -464 R0
SYMATTR InstName U4
SYMBOL res -1936 -592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res -2112 -496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 25k
SYMBOL OpAmps\\UniversalOpAmp4 -1632 -464 R0
SYMATTR InstName U5
SYMBOL voltage -3152 448 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 27 103 Left 2
SYMATTR InstName Vblack
SYMATTR Value PWL file="./PWL Sources/on-black-2s.txt"
SYMBOL voltage -3152 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 27 103 Left 2
SYMATTR InstName Vgreen
SYMATTR Value PWL file="./PWL Sources/on-green-2s.txt"
TEXT -1408 -680 Left 2 ;PWM regenerator
TEXT -1712 128 Left 2 !.tran 0 250m 0 0.01
TEXT -3232 -632 Left 2 ;High pass filter (Cf = 10Hz)
TEXT -3624 -632 Left 2 ;Signal Buffer (Stage 1)
TEXT -2648 -632 Left 2 ;Signal Buffer (Stage 2)
TEXT -1784 -632 Left 2 ;Signal Buffer (Stage 3)
TEXT -2304 -664 Left 2 ;Signal amplification
TEXT -3272 504 Left 2 ;Black
TEXT -3280 792 Left 2 ;White
TEXT -3280 216 Left 2 ;Green
TEXT -3280 16 Left 2 ;Signal Waveforms
TEXT -2336 16 Left 2 ;Supply Voltages
TEXT -1712 16 Left 2 ;SPICE Directives
RECTANGLE Normal -896 -352 -1408 -656 2
RECTANGLE Normal -2720 -304 -3232 -608 2
RECTANGLE Normal -3312 -352 -3632 -608 2
RECTANGLE Normal -2336 -352 -2656 -608 2
RECTANGLE Normal -1472 -352 -1792 -608 2
RECTANGLE Normal -1840 -352 -2304 -640 2
RECTANGLE Normal -1408 960 -3424 -64 2
